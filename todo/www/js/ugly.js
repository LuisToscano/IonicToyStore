function modalForm(o,t,n){this.submitted=!1,this.val={};var e=this;o.fromTemplateUrl(n,function(o){e.modal=o},{scope:t,animation:"slide-in-up"}),this.open=function(){this.modal.show()},this.close=function(){this.modal.hide(),this.val={},this.submitted=!1}}!function(){angular.module("starter",["ionic"]).run(["$ionicPlatform",function(o){o.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}])}(),function(){angular.module("store",["ionic"]).directive("toyContainer",function(){return{restrict:"A",templateUrl:"directives/toy.html"}}).controller("toyController",["$toys","$scope","$ionicModal","$ionicPopup",function(o,t,n,e){t.toys=o.list,t.search="",t.curToy={},t.toyListEmpty=function(){return 0===t.toys.length},t.commentListEmpty=function(o){return 0===o.comments.length},t.toggleInfoVisible=function(t){o.toggleInfo(t)},t.toggleCommentsVisible=function(t){t.comments.length>0&&o.toggleComments(t)},t.newToy=new modalForm(n,t,"modals/new-toy.html"),t.newComment=new modalForm(n,t,"modals/new-comment.html"),t.addToy=function(n){t.newToy.submitted=!0,n&&(o.addToy(t.newToy.val),t.newToy.close())},t.deleteToy=function(t){var n=e.confirm({title:"Borrar juguete",template:'Realmente quieres borrar "'+t.name+'"?'});n.then(function(n){n&&o.deleteToy(t)})},t.openComment=function(o){t.curToy=o,t.newComment.open()},t.addComment=function(n){t.newComment.submitted=!0,n&&(o.addComment(t.curToy,t.newComment.val),t.curToy={},t.newComment.close())}}]).service("$toys",function(){this.list=window.localStorage.toys?angular.fromJson(window.localStorage.toys):[],this.addToy=function(o){this.list.push({name:o.name,description:o.description,comments:[],info_visible:!1,comments_visible:!1}),window.localStorage.toys=angular.toJson(this.list)},this.deleteToy=function(o){var t=this.list.indexOf(o);t>=0?(this.list.splice(t,1),window.localStorage.toys=angular.toJson(this.list)):(console.error("Object does not exist."),console.log(o))},this.addComment=function(o,t){o.comments.push({author:t.author,body:t.body}),window.localStorage.toys=angular.toJson(this.list)},this.toggleInfo=function(o){o.info_visible=!o.info_visible,window.localStorage.toys=angular.toJson(this.list)},this.toggleComments=function(o){o.comments_visible=!o.comments_visible,window.localStorage.toys=angular.toJson(this.list)}})}();